(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19fb9185"],{"018b":function(e,t,n){"use strict";var i=n("f258"),r=n.n(i);r.a},"7ca0":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",["DESIGN"===e.mode?n("div",[n("draggable",{staticClass:"l-drag-from",attrs:{list:e._columns,group:"form",options:{animation:300,chosenClass:"choose",sort:!0}},on:{start:function(t){e.drag=!0,e.selectFormItem=null},end:function(t){e.drag=!1}}},e._l(e._columns,(function(t,i){return n("div",{key:i,staticClass:"l-form-item",style:e.getSelectedClass(t),on:{click:function(n){return n.stopPropagation(),e.selectItem(t)}}},[n("div",{staticClass:"l-form-header"},[n("p",[t.props.required?n("span",[e._v("*")]):e._e(),e._v(e._s(t.title))]),n("div",{staticClass:"l-option"},[n("i",{staticClass:"el-icon-close",on:{click:function(t){return e.delItem(i)}}})]),n("form-design-render",{attrs:{config:t}})],1)])})),0),n("div",{staticStyle:{color:"#c0bebe","text-align":"center",width:"90%",padding:"5px"}},[e._v("☝ 拖拽控件到表格内部")])],1):n("div",[e.rowLayout?n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{size:"medium","header-cell-style":{background:"#f5f7fa",padding:"3px 0"},border:e.showBorder,data:e._value}},[n("el-table-column",{attrs:{fixed:"",type:"index",label:"序号",width:"50"}}),e._l(e._columns,(function(t,i){return n("el-table-column",{attrs:{"min-width":e.getMinWidth(t),prop:t.id,label:t.title},scopedSlots:e._u([{key:"default",fn:function(i){return[n("form-design-render",{class:{"valid-error":e.showError(t,e._value[i.$index][t.id])},attrs:{mode:e.mode,config:t},model:{value:e._value[i.$index][t.id],callback:function(n){e.$set(e._value[i.$index],t.id,n)},expression:"_value[scope.$index][column.id]"}})]}}],null,!0)})})),n("el-table-column",{attrs:{fixed:"right","min-width":"90",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(n){return e.copyData(t.$index,t.row)}}},[e._v("复制")]),n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(n){return e.delRow(t.$index,t.row)}}},[e._v("删除")])]}}],null,!1,3573095417)})],2),n("el-button",{attrs:{size:"small",icon:"el-icon-plus"},on:{click:e.addRow}},[e._v(e._s(e.placeholder))])],1):n("div",[e._l(e._value,(function(t,i){return n("el-form",{key:i,ref:"table-form-"+i,refInFor:!0,staticClass:"table-column",attrs:{rules:e.rules,model:t}},[n("div",{staticClass:"table-column-action"},[n("span",[e._v("第 "+e._s(i+1)+" 项")]),n("i",{staticClass:"el-icon-close",on:{click:function(n){return e.delRow(i,t)}}})]),e._l(e._columns,(function(i,r){return n("el-form-item",{key:"column_"+r,attrs:{prop:i.id,label:i.title}},[n("form-design-render",{attrs:{mode:e.mode,config:i},model:{value:t[i.id],callback:function(n){e.$set(t,i.id,n)},expression:"row[column.id]"}})],1)}))],2)})),n("el-button",{attrs:{size:"small",icon:"el-icon-plus"},on:{click:e.addRow}},[e._v(e._s(e.placeholder))])],2)])])},r=[],a=(n("4160"),n("a434"),n("b0c0"),n("a9e3"),n("159b"),n("310e")),l=n.n(a),o=n("8032"),u=n("d16b"),s=n("8f73"),c={mixins:[s["a"]],name:"TableList",components:{draggable:l.a,FormDesignRender:u["a"]},props:{value:{type:Array,default:function(){return[]}},placeholder:{type:String,default:"添加数据"},columns:{type:Array,default:function(){return[]}},showBorder:{type:Boolean,default:!0},maxSize:{type:Number,default:0},rowLayout:{type:Boolean,default:!0}},created:function(){Array.isArray(this.value)||(this._value=[])},computed:{rules:function(){var e={};return this.columns.forEach((function(t){t.props.required&&(e[t.id]=[{type:"Array"===t.valueType?"array":void 0,required:!0,message:"请填写".concat(t.title),trigger:"blur"}])})),e},_columns:{get:function(){return this.columns},set:function(e){this.columns=e}},selectFormItem:{get:function(){return this.$store.state.selectFormItem},set:function(e){this.$store.state.selectFormItem=e}}},data:function(){return{select:null,drag:!1,ValueType:o["a"]}},methods:{getMinWidth:function(e){switch(e.name){case"DateTime":return"250px";case"DateTimeRange":return"280px";case"MultipleSelect":return"200px";default:return"150px"}},showError:function(e,t){if(e.props.required)switch(e.valueType){case o["a"].dept:case o["a"].user:case o["a"].dateRange:case o["a"].array:return!(Array.isArray(t)&&t.length>0);default:return!this.$isNotEmpty(t)}return!1},copyData:function(e,t){this._value.push(this.$deepCopy(t))},delRow:function(e,t){this._value.splice(e,1)},addRow:function(){var e=this;if(this.maxSize>0&&this._value.length>=this.maxSize)this.$message.warning("最多只能添加".concat(this.maxSize,"行"));else{var t={};this.columns.forEach((function(n){return e.$set(t,n.id,void 0)})),this._value.push(t),this.$set(this,"_value",this._value)}},delItem:function(e){this._columns.splice(e,1)},selectItem:function(e){this.selectFormItem=e},getSelectedClass:function(e){return this.selectFormItem&&this.selectFormItem.id===e.id?"border-left: 4px solid #f56c6c":""},validate:function(e){var t=this;if(this.rowLayout){for(var n=!0,i=0;i<this.columns.length;i++)if(this.columns[i].props.required)for(var r=0;r<this._value.length;r++)if(n=!this.showError(this.columns[i],this._value[r][this.columns[i].id]),!n)return void e(!1);e(n)}else{var a=0;this._value.forEach((function(e,n){var i=t.$refs["table-form-".concat(n)];i&&Array.isArray(i)&&i.length>0&&i[0].validate((function(e){e&&a++}))})),a===this._value.length?e(!0):e(!1)}}}},d=c,p=(n("018b"),n("2877")),m=Object(p["a"])(d,i,r,!1,null,"4ac03114",null);t["default"]=m.exports},8032:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var i={string:"String",object:"Object",array:"Array",number:"Number",date:"Date",user:"User",dept:"Dept",role:"Role",dateRange:"DateRange"},r=[{name:"布局",components:[{title:"分栏布局",name:"SpanLayout",icon:"el-icon-c-scale-to-original",value:[],valueType:i.array,props:{items:[]}}]},{name:"基础组件",components:[{title:"单行文本输入",name:"TextInput",icon:"el-icon-edit",value:"",valueType:i.string,props:{required:!1,enablePrint:!0}},{title:"多行文本输入",name:"TextareaInput",icon:"el-icon-more-outline",value:"",valueType:i.string,props:{required:!1,enablePrint:!0}},{title:"数字输入框",name:"NumberInput",icon:"el-icon-edit-outline",value:"",valueType:i.number,props:{required:!1,enablePrint:!0}},{title:"金额输入框",name:"AmountInput",icon:"iconfont icon-zhufangbutiezhanghu",value:"",valueType:i.number,props:{required:!1,enablePrint:!0,showChinese:!0}},{title:"单选框",name:"SelectInput",icon:"el-icon-circle-check",value:"",valueType:i.string,props:{required:!1,enablePrint:!0,expanding:!1,options:["选项1","选项2"]}},{title:"多选框",name:"MultipleSelect",icon:"iconfont icon-duoxuankuang",value:[],valueType:i.array,props:{required:!1,enablePrint:!0,expanding:!1,options:["选项1","选项2"]}},{title:"日期时间点",name:"DateTime",icon:"el-icon-date",value:"",valueType:i.date,props:{required:!1,enablePrint:!0,format:"yyyy-MM-dd HH:mm"}},{title:"日期时间区间",name:"DateTimeRange",icon:"iconfont icon-kaoqin",valueType:i.dateRange,props:{required:!1,enablePrint:!0,placeholder:["开始时间","结束时间"],format:"yyyy-MM-dd HH:mm",showLength:!1}},{title:"上传图片",name:"ImageUpload",icon:"el-icon-picture-outline",value:[],valueType:i.array,props:{required:!1,enablePrint:!0,maxSize:5,maxNumber:10,enableZip:!0}},{title:"上传附件",name:"FileUpload",icon:"el-icon-folder-opened",value:[],valueType:i.array,props:{required:!1,enablePrint:!0,onlyRead:!1,maxSize:100,maxNumber:10,fileTypes:[]}},{title:"人员选择",name:"UserPicker",icon:"el-icon-user",value:[],valueType:i.user,props:{required:!1,enablePrint:!0,multiple:!1}},{title:"部门选择",name:"DeptPicker",icon:"iconfont icon-map-site",value:[],valueType:i.dept,props:{required:!1,enablePrint:!0,multiple:!1}},{title:"角色选择",name:"RolePicker",icon:"el-icon-s-custom",value:[],valueType:i.role,props:{required:!1,enablePrint:!0,multiple:!1}},{title:"说明文字",name:"Description",icon:"el-icon-warning-outline",value:"",valueType:i.string,props:{required:!1,enablePrint:!0}}]},{name:"扩展组件",components:[{title:"明细表",name:"TableList",icon:"el-icon-tickets",value:[],valueType:i.array,props:{required:!1,enablePrint:!0,showBorder:!0,rowLayout:!0,showSummary:!1,summaryColumns:[],maxSize:0,columns:[]}}]}]},"8f73":function(e,t,n){"use strict";t["a"]={props:{mode:{type:String,default:"DESIGN"},formDisable:{type:Boolean,default:!1},required:{type:Boolean,default:!1}},data:function(){return{}},watch:{_value:function(e,t){this.$emit("change",e)}},computed:{_value:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}}},f258:function(e,t,n){}}]);
//# sourceMappingURL=chunk-19fb9185.4f40c4d9.js.map